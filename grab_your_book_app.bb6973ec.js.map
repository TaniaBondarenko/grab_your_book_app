{"version":3,"sources":["index.js"],"names":["window","renderApp","getValues","getTheBooks","ShowBooks","styles","dataStore","isNotFiltered","isDataLoading","theBooksInfo","filteredBooks","books","random","baseURL","URL","Promise","fetch","then","response","json","result","items","map","el","volumeInfo","catch","error","Error","resolve","document","getElementById","innerHTML","App","container","navWrapper","navigation","logoWrapper","ulWrapper","navList","BookChoosing","CategorySelection","LanguageSelection","Randomiser","AllBooks","bookContainer","btn","content","forEach","bookCard","mainInfo","bookImg","undefined","thumbnail","aboutBook","module","hot","accept","doFilter","filterValue","filter","book","categories","join","toLocaleString","language","DoSearch","searchValue","title","toLowerCase","includes","authors","split","randomWord","words","Math","floor","length","getRandomBooks","word","showAllBooks","valueName","valueArray","Array","isArray","push"],"mappings":"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","file":"grab_your_book_app.bb6973ec.js","sourceRoot":"..","sourcesContent":["import styles from './styles.css';\n\nwindow.renderApp = renderApp;\nwindow.getValues = getValues;\nwindow.getTheBooks = getTheBooks;\nwindow.ShowBooks = ShowBooks;\nwindow.styles = styles;\n\nwindow.dataStore = {\n  isNotFiltered: true,\n  isDataLoading: false,\n  theBooksInfo: [],\n  filteredBooks: [],\n  books: [],\n  random: '',\n};\n\nconst baseURL = `https://www.googleapis.com/books/v1/volumes?q=subject:drama&orderBy=newest&maxResults=40&${process.env.THE_KEY}`;\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nfunction getTheBooks(URL) {\n  fetch(URL)\n    .then(response => response.json())\n    .then(result => {\n      return (window.dataStore.theBooksInfo = result.items.map(el => el.volumeInfo));\n    })\n    .then(() => renderApp())\n    .catch(error => {\n      throw new Error('Data loading failed.');\n    });\n  return Promise.resolve({});\n}\n\nfunction renderApp() {\n  document.getElementById('app-root').innerHTML = ` ${App()} `;\n}\n\nfunction App() {\n  return `<div class='${styles.container}'>\n  <div class=${styles.navWrapper}>\n            <nav class='${styles.navigation}'>\n              <div class=\"${styles.logoWrapper}\">\n               <h1 class=\"mainHeader\">Grab Your Book</h1>\n              </div>\n              <div class=${styles.ulWrapper}>\n              <ul class=\"${styles.navList}\">\n              ${BookChoosing()}\n              ${CategorySelection()}\n              ${LanguageSelection()}\n              ${Randomiser()}\n              ${AllBooks()}\n              </ul>\n              </div>\n            </nav>\n            </div>\n            <div class='${styles.bookContainer}'>\n           ${ShowBooks()}\n            </div>\n         </div>`;\n}\n\nfunction BookChoosing() {\n  return `<li>\n            <input type=\"search\" placeholder=\"Type title or author\"\n              class=\"searchWord\"/>\n              <button class=\"${styles.btn}\" type='button' onclick=\"DoSearch(document.querySelector('.searchWord').value)\">Find</button>\n          </li>`;\n}\n\nfunction CategorySelection() {\n  return `<li>\n           <label for=\"categories\">Choose a category:</label>\n            <select name=\"categories\" id=\"categories\" class=\"categories\" onchange=\"(doFilter(this.value));\" >\n              <option value='' selected disabled hidden >Category </option>\n              ${getValues('categories')}\n              </select>\n          </li>`;\n}\n\nfunction LanguageSelection() {\n  return `<li>\n           <label for=\"language\">Select language:</label>\n            <select name=\"language\" id=\"language\" class=\"language\" onchange=\"ShowBooks(doFilter(this.value));\">\n              <option value=\"\" selected disabled hidden>Language</option>\n              ${getValues('language')}\n              </select>\n          </li>`;\n}\n\nfunction Randomiser() {\n  return `<button class=\"${styles.btn}\" type='button' onclick=\"getRandomBooks(randomWord())\">Get advise</button>`;\n}\n\nfunction AllBooks() {\n  return `<li>\n              <button class=\"${styles.btn}\" type='button' onclick=\"showAllBooks()\">Show all</button>\n          </li>`;\n}\n\nfunction ShowBooks() {\n  if (window.dataStore.isNotFiltered) {\n    window.dataStore.books = window.dataStore.theBooksInfo;\n  } else {\n    window.dataStore.books = window.dataStore.filteredBooks;\n  }\n  let content = '';\n  window.dataStore.books.forEach(el => {\n    content += `<div class='${styles.bookCard}'>\n                              <div class='${styles.mainInfo}'> \n                              <img class='${styles.bookImg}' src=${\n      el['imageLinks'].thumbnail === undefined\n        ? './images/book.png'\n        : `'${el['imageLinks'].thumbnail}'`\n    }'>\n                               <p class='bookTitle'><h3>${el['title']}</h3></p>\n                               <p class='bookAuthor'>${el['authors']}</p></div>\n                               <div class='${styles.aboutBook}'><h4>Description</h4><br>${\n      el['description'] === undefined ? 'You should read to find out' : el['description']\n    }</div>\n                               </div>`;\n  });\n  return content ? `${content}` : 'No books found';\n}\n\nconst doFilter = function (filterValue) {\n  window.dataStore.isNotFiltered = false;\n  window.dataStore.filteredBooks = window.dataStore.theBooksInfo.filter(book => {\n    return (\n      (book.categories !== undefined && book.categories.join() === filterValue.toLocaleString()) ||\n      (book.language !== undefined && book.language === filterValue.toLocaleString())\n    );\n  });\n  window.dataStore.filteredBooks;\n  window.renderApp();\n};\n\nconst DoSearch = function (searchValue) {\n  window.dataStore.isNotFiltered = true;\n  window.dataStore.filteredBooks = window.dataStore.theBooksInfo.filter(book => {\n    return (\n      book.title.toLocaleString().toLowerCase().includes(searchValue) ||\n      book.authors.join(' ').split(' ').join('').toLowerCase().includes(searchValue)\n    );\n  });\n  window.dataStore.isNotFiltered = false;\n  window.renderApp();\n};\n\nconst randomWord = function () {\n  const words = [\n    'flowers',\n    'season',\n    'heart',\n    'love',\n    'forest',\n    'beauty',\n    'good',\n    'sun',\n    'dog',\n    'winter',\n    'lake',\n    'money',\n    'fun',\n    'bird',\n    'book',\n    'king',\n    'ring',\n  ];\n  return (window.dataStore.random = words[Math.floor(Math.random() * words.length)]);\n};\n\nconst getRandomBooks = function (word) {\n  const URL = `https://www.googleapis.com/books/v1/volumes?q=${word}&subject:drama&orderBy=newest&maxResults=4&${process.env.THE_KEY}`;\n  getTheBooks(URL);\n  window.dataStore.isNotFiltered = true;\n};\n\nconst showAllBooks = function () {\n  URL = `https://www.googleapis.com/books/v1/volumes?q=subject:drama&orderBy=newest&maxResults=40&${process.env.THE_KEY}`;\n  getTheBooks(URL);\n  window.dataStore.isNotFiltered = true;\n};\n\nfunction getValues(valueName) {\n  let valueArray = [];\n  window.dataStore.theBooksInfo.forEach(el => {\n    if (Array.isArray(el[`${valueName}`])) {\n      if (!valueArray.includes(el[`${valueName}`].join())) {\n        return valueArray.push(el[`${valueName}`].join());\n      }\n    } else {\n      if (!valueArray.includes(el[`${valueName}`])) {\n        return valueArray.push(el[`${valueName}`]);\n      }\n    }\n  });\n  return valueArray.map(function (el) {\n    return `<option value='${el}'>${el}</option>`;\n  });\n}\n\nwindow.doFilter = doFilter;\nwindow.DoSearch = DoSearch;\nwindow.getRandomBooks = getRandomBooks;\nwindow.randomWord = randomWord;\nwindow.showAllBooks = showAllBooks;\n\ngetTheBooks(baseURL);\n"]}