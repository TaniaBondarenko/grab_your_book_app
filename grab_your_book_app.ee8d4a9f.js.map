{"version":3,"sources":["index.js"],"names":["window","renderApp","getValues","getTheBooks","ShowBooks","styles","dataStore","isNotFiltered","isDataLoading","theBooksInfo","filteredBooks","books","random","filterValue","searchValue","baseURL","URL","Promise","fetch","then","response","json","result","items","map","el","volumeInfo","catch","error","Error","resolve","document","getElementById","innerHTML","App","container","navWrapper","navigation","logoWrapper","ulWrapper","navList","BookChoosing","CategorySelection","LanguageSelection","Randomiser","AllBooks","bookContainer","btn","content","forEach","bookCard","mainInfo","bookImg","undefined","thumbnail","aboutBook","module","hot","accept","doFilter","filter","book","categories","join","toLocaleString","language","querySelector","setAttribute","DoSearch","title","toLowerCase","includes","authors","split","value","randomWord","words","Math","floor","length","getRandomBooks","word","showAllBooks","valueName","valueArray","Array","isArray","push"],"mappings":"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","file":"grab_your_book_app.ee8d4a9f.js","sourceRoot":"..","sourcesContent":["import styles from './styles.css';\n\nwindow.renderApp = renderApp;\nwindow.getValues = getValues;\nwindow.getTheBooks = getTheBooks;\nwindow.ShowBooks = ShowBooks;\nwindow.styles = styles;\n\nwindow.dataStore = {\n  isNotFiltered: true,\n  isDataLoading: false,\n  theBooksInfo: [],\n  filteredBooks: [],\n  books: [],\n  random: '',\n  filterValue: '',\n  searchValue: '',\n};\n\nconst baseURL = `https://www.googleapis.com/books/v1/volumes?q=subject:drama&orderBy=newest&maxResults=40&${process.env.THE_KEY}`;\n\nif (module.hot) {\n  module.hot.accept();\n}\n\nfunction getTheBooks(URL) {\n  fetch(URL)\n    .then(response => response.json())\n    .then(result => {\n      return (window.dataStore.theBooksInfo = result.items.map(el => el.volumeInfo));\n    })\n    .then(() => renderApp())\n    .catch(error => {\n      throw new Error('Data loading failed.');\n    });\n  return Promise.resolve({});\n}\n\nfunction renderApp() {\n  document.getElementById('app-root').innerHTML = ` ${App()} `;\n}\n\nfunction App() {\n  return `<div class='${styles.container}'>\n  <div class=${styles.navWrapper}>\n            <nav class='${styles.navigation}'>\n              <div class=\"${styles.logoWrapper}\">\n               <h1 class=\"mainHeader\">Grab Your Book</h1>\n              </div>\n              <div class=${styles.ulWrapper}>\n              <ul class=\"${styles.navList}\">\n              ${BookChoosing()}\n              ${CategorySelection()}\n              ${LanguageSelection()}\n              ${Randomiser()}\n              ${AllBooks()}\n              </ul>\n              </div>\n            </nav>\n            </div>\n            <div class='${styles.bookContainer}'>\n           ${ShowBooks()}\n            </div>\n         </div>`;\n}\n\nfunction BookChoosing() {\n  return `<li>\n            <input type=\"search\" placeholder=\"Type title or author\"\n              class=\"searchWord\"/>\n              <button class=\"${styles.btn}\" type='button' onclick=\"DoSearch(document.querySelector('.searchWord').value)\">Find</button>\n          </li>`;\n}\n\nfunction CategorySelection() {\n  return `<li style=\"width:100%\"  >\n           <label for=\"categories\">Choose a category:</label>\n            <select name=\"categories\" id=\"categories\" class=\"categories\" onchange=\"(doFilter(this.value));\" >\n              <option value='' >Category </option>\n              ${getValues('categories')}\n              </select>\n          </li>`;\n}\n\nfunction LanguageSelection() {\n  return `<li>\n           <label for=\"language\">Select language:</label>\n            <select name=\"language\" id=\"language\" class=\"language\" onchange=\"ShowBooks(doFilter(this.value));\">\n              <option value=\"\" selected disabled hidden>Language</option>\n              ${getValues('language')}\n              </select>\n          </li>`;\n}\n\nfunction Randomiser() {\n  return `<p>Wondering what to read? <button class=\"${styles.btn}\" type='button' onclick=\"getRandomBooks(randomWord())\">Get advise</button></p>`;\n}\n\nfunction AllBooks() {\n  return `<li>\n              <button class=\"${styles.btn}\" type='button' onclick=\"showAllBooks()\">Show all</button>\n          </li>`;\n}\n\nfunction ShowBooks() {\n  if (window.dataStore.isNotFiltered) {\n    window.dataStore.books = window.dataStore.theBooksInfo;\n  } else {\n    window.dataStore.books = window.dataStore.filteredBooks;\n  }\n  let content = '';\n  window.dataStore.books.forEach(el => {\n    content += `<div class='${styles.bookCard}'>\n                              <div class='${styles.mainInfo}'> \n                              <img class='${styles.bookImg}' src=${\n      el['imageLinks'].thumbnail === undefined\n        ? './images/book.png'\n        : `'${el['imageLinks'].thumbnail}'`\n    }'>\n                               <p class='bookTitle'><h3>${el['title']}</h3></p>\n                               <p class='bookAuthor'>${el['authors']}</p></div>\n                               <div class='${styles.aboutBook}'><h4>Description</h4><br>${\n      el['description'] === undefined ? 'You should read to find out' : el['description']\n    }</div>\n                               </div>`;\n  });\n  return content ? `${content}` : 'No books found';\n}\n\nconst doFilter = function (filterValue) {\n  window.dataStore.isNotFiltered = false;\n  window.dataStore.filterValue = filterValue;\n  window.dataStore.filteredBooks = window.dataStore.theBooksInfo.filter(book => {\n    return (\n      (book.categories !== undefined && book.categories.join() === filterValue.toLocaleString()) ||\n      (book.language !== undefined && book.language === filterValue.toLocaleString())\n    );\n  });\n  window.dataStore.filteredBooks;\n  window.renderApp();\n  if (filterValue === window.dataStore.filterValue) {\n    document\n      .querySelector(`option[value='${window.dataStore.filterValue}']`)\n      .setAttribute('selected', true);\n  }\n};\n\nconst DoSearch = function (searchValue) {\n  window.dataStore.isNotFiltered = true;\n  window.dataStore.searchValue = searchValue;\n  window.dataStore.filteredBooks = window.dataStore.theBooksInfo.filter(book => {\n    return (\n      book.title.toLocaleString().toLowerCase().includes(searchValue) ||\n      book.authors.join(' ').split(' ').join('').toLowerCase().includes(searchValue)\n    );\n  });\n  window.dataStore.isNotFiltered = false;\n  window.renderApp();\n  document.querySelector('.searchWord').value = window.dataStore.searchValue;\n};\n\nconst randomWord = function () {\n  const words = [\n    'flowers',\n    'season',\n    'heart',\n    'love',\n    'forest',\n    'beauty',\n    'good',\n    'sun',\n    'dog',\n    'winter',\n    'lake',\n    'money',\n    'fun',\n    'bird',\n    'book',\n    'king',\n    'ring',\n  ];\n  return (window.dataStore.random = words[Math.floor(Math.random() * words.length)]);\n};\n\nconst getRandomBooks = function (word) {\n  const URL = `https://www.googleapis.com/books/v1/volumes?q=${word}&subject:drama&orderBy=newest&maxResults=4&${process.env.THE_KEY}`;\n  getTheBooks(URL);\n  window.dataStore.isNotFiltered = true;\n};\n\nconst showAllBooks = function () {\n  URL = `https://www.googleapis.com/books/v1/volumes?q=subject:drama&orderBy=newest&maxResults=40&${process.env.THE_KEY}`;\n  getTheBooks(URL);\n  window.dataStore.isNotFiltered = true;\n};\n\nfunction getValues(valueName) {\n  let valueArray = [];\n  window.dataStore.theBooksInfo.forEach(el => {\n    if (Array.isArray(el[`${valueName}`])) {\n      if (!valueArray.includes(el[`${valueName}`].join())) {\n        return valueArray.push(el[`${valueName}`].join());\n      }\n    } else {\n      if (!valueArray.includes(el[`${valueName}`])) {\n        return valueArray.push(el[`${valueName}`]);\n      }\n    }\n  });\n  return valueArray.map(function (el) {\n    return `<option value='${el}'>${el}</option>`;\n  });\n}\n\nwindow.doFilter = doFilter;\nwindow.DoSearch = DoSearch;\nwindow.getRandomBooks = getRandomBooks;\nwindow.randomWord = randomWord;\nwindow.showAllBooks = showAllBooks;\n\ngetTheBooks(baseURL);\n"]}